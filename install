function get_script() {
    for file in $1/*
    do
        if test -f $file
        then
            echo "source $1/$(basename $file)"
        fi
    done
}


function config_zsh() {
    cp $MYSHELL/.commonrc $MYSHELL/.zshrc
    get_script $MYSHELL/zsh >> $MYSHELL/.zshrc
    if [ `touch ~/.zshrc && grep -wc ". $MYSHELL/.zshrc" ~/.zshrc` -eq 0 ]; then
        echo ". $MYSHELL/.zshrc" >> ~/.zshrc
    fi
}

function config_bash() {
    cp $MYSHELL/.commonrc $MYSHELL/.bashrc
    get_script $MYSHELL/bash >> $MYSHELL/.bashrc
    if [ `touch ~/.bashrc && grep -wc ". $MYSHELL/.bashrc" ~/.bashrc` -eq 0 ]; then
        echo ". $MYSHELL/.bashrc" >> ~/.bashrc
    fi
}


function config_common(){
    echo "export MYSHELL=$MYSHELL" >> $MYSHELL/.commonrc
    get_script $MYSHELL/common >> $MYSHELL/.commonrc
}


export MYSHELL=$PWD


rm -rf $MYSHELL/.bashrc $MYSHELL/.zshrc $MYSHELL/.commonrc

config_common
config_bash
config_zsh


# for file in $MYSHELL/common/*
# do
#     if test -f $file
#     then
#     	echo ". $MYSHELL/common/$(basename $file)" >> $MYSHELL/.bashrc
#         echo ". $MYSHELL/common/$(basename $file)" >> $MYSHELL/.zshrc
#     fi
# done


# echo "ZSH_CUSTOM=$MYSHELL/zsh/oh-my-zsh/custom/" >> $MYSHELL/.zshrc

# if [ `touch ~/.bashrc && grep -wc ". $MYSHELL/.bashrc" ~/.bashrc` -eq 0 ]; then
#     echo ". $MYSHELL/.bashrc" >> ~/.bashrc
# fi

# if [ `touch ~/.zshrc && grep -wc ". $MYSHELL/.zshrc" ~/.zshrc` -eq 0 ]; then
#     echo ". $MYSHELL/.zshrc" >> ~/.zshrctemp
#     cat ~/.zshrc  >> ~/.zshrctemp
#     mv ~/.zshrctemp ~/.zshrc
# fi

# sed -i "" "s/^.*ZSH_CUSTOM=.*$/ZSH_CUSTOM='$MYSHELL\/zsh\/oh-my-zsh\/custom\//g" ~/.zshrc


